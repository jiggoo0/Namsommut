<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verified Records | Namsommut Investigation</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/theme.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
</head>
<body class="bg-dark text-white">

    <div id="header-placeholder"></div>

    <main style="padding-top: 100px;">
        <section class="py-5">
            <div class="container text-center animate-on-scroll">
                <div class="d-inline-block p-3 bg-primary bg-opacity-10 rounded-circle mb-4">
                    <i class="bi bi-shield-lock text-primary fs-1 shadow-sm"></i>
                </div>
                <h1 class="display-5 fw-bold mb-3">บันทึกผลการปฏิบัติงาน</h1>
                <p class="text-white-50 mx-auto" style="max-width: 650px;">
                    คลังข้อมูลคำยืนยันจากผู้ใช้บริการจริงภายใต้โปรโตคอลการปกปิดตัวตนสูงสุด (Anonymity Protocol) 
                    เพื่อรักษาความปลอดภัยและความลับของลูกค้าเป็นสำคัญ
                </p>
                <div class="divider mx-auto my-4" style="width: 60px; height: 3px; background: var(--primary-blue);"></div>
            </div>
        </section>

        <section class="pb-5">
            <div class="container">
                <div id="full-review-list" class="row g-4">
                    <div class="col-12 text-center py-5">
                        <div class="spinner-border text-primary mb-3" role="status"></div>
                        <p class="font-monospace x-small text-muted tracking-widest">ACCESSING_SECURE_RECORDS...</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="section-padding bg-dark-section border-top border-white border-opacity-5">
            <div class="container text-center animate-on-scroll">
                <h3 class="fw-bold mb-4">สถานะระบบ: <span class="text-success font-monospace">READY_FOR_OPERATIONS</span></h3>
                <p class="text-muted mb-5">เราพร้อมดำเนินการทันทีที่คุณส่งสัญญาณ</p>
                <a href="contact.html" class="btn btn-primary btn-lg rounded-pill px-5 shadow-pulse font-monospace fw-bold">
                    INITIATE_CONTACT
                </a>
            </div>
        </section>
    </main>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="assets/js/config.js"></script>
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/app.js"></script>
    
    <script>
        /**
         * Specialized Page Loader for Reviews
         * ดึงข้อมูลจากฐานข้อมูล JSON มาแสดงผลในรูปแบบ Grid
         */
        const initReviewPage = () => {
            // เช็คว่า CONFIG พร้อมไหม (กัน Error CONFIG is not defined)
            if (typeof window.CONFIG === 'undefined') {
                setTimeout(initReviewPage, 100);
                return;
            }

            loadAllReviews();
        };

        async function loadAllReviews() {
            const container = document.getElementById('full-review-list');
            if(!container) return;
            
            try {
                // ดึง Path จาก CONFIG โดยตรง
                const response = await fetch(window.CONFIG.DATA_PATH.REVIEWS);
                if (!response.ok) throw new Error("Database offline");
                
                const data = await response.json();
                
                container.innerHTML = data.map(rev => `
                    <div class="col-lg-4 col-md-6 animate-on-scroll">
                        <div class="glass-card p-4 h-100 d-flex flex-column border-primary border-opacity-10">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div class="text-primary small">
                                    ${'<i class="bi bi-star-fill"></i> '.repeat(rev.rating)}
                                </div>
                                <span class="badge bg-primary bg-opacity-10 text-primary x-small font-monospace border border-primary border-opacity-25">
                                    VERIFIED_CASE
                                </span>
                            </div>
                            <p class="text-white-50 small mb-4 italic flex-grow-1">"${rev.comment}"</p>
                            <div class="mt-auto border-top border-white border-opacity-5 pt-3">
                                <h6 class="mb-1 fw-bold text-white">${rev.name}</h6>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="text-primary font-monospace" style="font-size: 0.65rem;">${rev.mission}</span>
                                    <span class="text-muted font-monospace" style="font-size: 0.6rem;">${rev.date}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');

                // รีเฟรชระบบ Animation (ถ้ามี)
                if(window.Utils && typeof window.Utils.initObserver === 'function') {
                    window.Utils.initObserver();
                }

            } catch(e) { 
                console.error("❌ Review Load Error:", e);
                container.innerHTML = `
                    <div class="col-12 text-center text-danger font-monospace py-5">
                        <i class="bi bi-exclamation-triangle mb-3 fs-1"></i><br>
                        ERROR: ARCHIVE_CONNECTION_FAILED
                    </div>`;
            }
        }

        document.addEventListener('DOMContentLoaded', initReviewPage);
    </script>
</body>
</html>
